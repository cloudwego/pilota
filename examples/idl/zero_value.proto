syntax = "proto3";

import "pilota.proto";
import "google/protobuf/descriptor.proto";
import "custom_options.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";
import "google/protobuf/any.proto";
import "google/protobuf/wrappers.proto";
import "google/protobuf/field_mask.proto";
import "google/protobuf/struct.proto";
import "google/protobuf/empty.proto";

extend google.protobuf.MessageOptions {
    optional string alias = 1111;
    optional float f32 = 1112;
    optional double f64 = 1113;
}

message B {
    string s3 = 1;
    repeated int32 int_vec = 2[(pilota.optional_repeated) = true];
}

message C {
    optional string s4 = 1;
    repeated B bb = 2[(pilota.rust_wrapper_arc_field) = true,(pilota.optional_repeated) = true];
}

message A {
    C c = 4[deprecated = true];
    B b = 3[(pilota.rust_wrapper_arc_field) = true];
    map<string, string> str_map = 1;
    string s1 = 2;
    optional string s2 = 2047;
    oneof test {
        string x = 6;
        int32 y = 8;
    }
}

message BB {
    option (alias) = "UnknownB";
    option (f32) = 1.23;
    option (f64) = 3.21;
}

message CC {
    optional string s4 = 1;
}

message UnknownA {
     BB b = 3;
     CC c = 4;
}

message WellKnownStruct {
  google.protobuf.Timestamp created_at = 1;
  google.protobuf.Duration  ttl        = 2;
  google.protobuf.StringValue  nickname = 3;
  google.protobuf.Int64Value   age      = 4;
  google.protobuf.FieldMask update_mask = 5;
  google.protobuf.Struct  props     = 6;
  google.protobuf.Any     payload   = 7;
  google.protobuf.Empty   reserved  = 8;
}

service TestService {
    option deprecated = true;
    rpc Echo(A) returns (A) {}
}